name: 'Install Python dependencies'
description: 'Install dependencies using pip'

inputs:
  path:
    description: 'Path to the directory containing requirements.txt'
    required: true
    default: python-greetings

runs:
  using: composite
  steps:
    - name: Checkout pipeline repo
      uses: actions/checkout@v4

    - name: Clone python-greetings repo
      uses: actions/checkout@v4
      with:
        repository: mtararujs/python-greetings
        path: python-greetings

    - name: Check python python-version
      run: python --version
      shell: cmd

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.13.2'

    - name: Create and activate virtual environment
      run: |
        python -m venv venv
        .\venv\Scripts\activate  # Для Windows (для Linux используем . venv/bin/activate)
      shell: cmd

    - name: Installing pip dependencies
      run: |
        pip install --upgrade pip
        pip install -r ${{ inputs.path }}/requirements.txt
      shell: cmd
      working-directory: python-greetings
